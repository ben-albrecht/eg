/*! mathworkers 18-01-2015 */
"use strict";!function(){var a=function(){function a(){var a={};this.on=function(c,d){b.util.checkFunction(d),a[c]=[d]},this.emit=function(b,c){a[b]=a[b]||[],c=c||[],a[b].forEach(function(a){a.call(this,c)})}}var b={},c={};c.version="1.2.0",b.Global={},b.Global.getVersion=function(){return c.version},c.workerPool=[],c.nWorkers=1,c.myWorkerId=0,c.logLevel=1,b.Global.setLogLevel=function(a){b.util.nullOrUndefined(a)||(c.logLevel=a)},c.unrollLoops=!1,b.Global.setUnrollLoops=function(a){b.util.checkNullOrUndefined(a),c.unrollLoops=a},c.createPool=function(a,d){function e(b){return{handle:"_init",id:b,nWorkers:a,logLevel:c.logLevel,unrollLoops:c.unrollLoops}}var f,g;if(c.isNode)if(c.nodeCluster=require("cluster"),c.nodeCluster.isMaster)for(f=0;a>f;++f)g=c.nodeCluster.fork(),g.send(e(f)),this.workerPool.push(g),this.nWorkers=this.workerPool.length;else c.nodeCluster.isWorker&&require(d);else for(b.util.checkWebWorkerSupport(),f=0;a>f;++f)g=new Worker(d),g.postMessage(e(f)),this.workerPool.push(g),this.nWorkers=this.workerPool.length;this.getWorker=function(a){return this.workerPool[a]}},c.isNode=!1,c.nodeCluster={},b.Global.setNode=function(a){b.util.checkNullOrUndefined(a),c.isNode=a},b.Global.isMaster=function(){return c.isNode&&c.nodeCluster&&c.nodeCluster.isMaster},b.Global.isWorker=function(){return c.isNode&&c.nodeCluster&&c.nodeCluster.isWorker},b.util={},b.util.checkWebWorkerSupport=function(){if("undefined"==typeof Worker)throw new Error("Web Worker support not available for MathWorkers.")},b.util.loadBalance=function(a){var b,d,e=c.myWorkerId,f=a/c.nWorkers|0,g=a%c.nWorkers;return g>e?(b=e*(f+1),d=b+f+1):(b=e*f+g,d=b+f),{ifrom:b,ito:d}},b.util.nullOrUndefined=function(a){return void 0===a||null===a},b.util.checkNullOrUndefined=function(a){if(b.util.nullOrUndefined(a))throw new TypeError("Undefined or null variable.")},b.util.checkNumber=function(a){if(b.util.checkNullOrUndefined(a),"number"!=typeof a)throw new TypeError("Expected type Number but is type "+typeof a)},b.util.checkFunction=function(a){if(b.util.checkNullOrUndefined(a),"function"!=typeof a)throw new TypeError("Expected type Function but is type "+typeof a)},b.util.checkArray=function(a){if(b.util.checkNullOrUndefined(a),!(a instanceof Array||a instanceof Float64Array))throw new TypeError("Expected type Array but is type "+typeof a)},b.util.checkFloat64Array=function(a){if(b.util.checkNullOrUndefined(a),!(a instanceof Float64Array))throw new TypeError("Expected type Float64Array but is type "+typeof a)},b.util.checkVector=function(a){if(b.util.checkNullOrUndefined(a),!(a instanceof b.Vector))throw new TypeError("Expected type Vector but is not.")},b.util.checkVectors=function(a,c){if(b.util.checkVector(a),b.util.checkVector(c),a.length!==c.length)throw new Error("Vectors have unequal lengths.")},b.util.checkVectorMatrix=function(a,c){if(b.util.checkVector(a),b.util.checkMatrix(c),a.length!==c.nrows)throw new Error("Vector length and number Matrix rows are unequal.")},b.util.checkMatrix=function(a){if(b.util.checkNullOrUndefined(a),!(a instanceof b.Matrix))throw new TypeError("Expected type Matrix but is not.")},b.util.checkMatrices=function(a,c){if(b.util.checkMatrix(a),b.util.checkMatrix(c),a.nrows!==c.nrows||a.ncols!==c.ncols)throw new Error("Matrices do not have equal numbers of rows and columns.")},b.util.checkMatrixVector=function(a,c){if(b.util.checkMatrix(a),b.util.checkVector(c),c.length!==a.ncols)throw new Error("Vector length and number Matrix columns are unequal.")},b.util.checkMatrixMatrix=function(a,c){if(b.util.checkMatrix(a),b.util.checkMatrix(c),a.ncols!==c.nrows)throw new Error("Matrices do not have compatible dimensions for matrix-matrix multiplication.")},b.util.mapValues=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b},b.util.ab2str=function(a){return String.fromCharCode.apply(null,new Uint16Array(a))},b.util.str2ab=function(a){for(var b=new ArrayBuffer(2*a.length),c=new Uint16Array(b),d=0,e=a.length;e>d;d++)c[d]=a.charCodeAt(d);return b};var d={};return d.postMessage=function(a,b){c.logLevel>2&&console.log("Posting message: %j",a),c.isNode?process.send({data:a}):self.postMessage(a,b)},d.postMessageToWorker=function(a,b,d){var e=c.getWorker(a);c.isNode?e.send({data:b}):e.postMessage(b,d)},d.setOnMessage=function(a){c.isNode?process.on("message",a):self.onmessage=a},b.Coordinator=function(a,e){var f=this,g={},h=[];this.ready=!1,this.onReady=function(a){f.on("_ready",a)},this.getBuffer=function(){return g},this.getMessageDataList=function(){return h},this.trigger=function(a,b){for(var e=0;e<c.nWorkers;++e)d.postMessageToWorker(e,{handle:"_trigger",tag:a,args:b})},this.sendDataToWorkers=function(a,b){for(var e=0;e<c.nWorkers;++e)d.postMessageToWorker(e,{handle:"_broadcastData",tag:b,data:a})},this.sendVectorToWorkers=function(a,e){for(var f=0;f<c.nWorkers;++f){var g;if(c.isNode)g=b.util.ab2str(a.array.buffer);else{var h=new Float64Array(a.array);g=h.buffer}d.postMessageToWorker(f,{handle:"_broadcastVector",tag:e,vec:g},[g])}},this.sendMatrixToWorkers=function(a,e){for(var f=0;f<c.nWorkers;++f){var g,h,i={handle:"_broadcastMatrix",tag:e,nrows:a.nrows},j=[];if(c.isNode)for(g=0;g<a.nrows;++g)i[g]=b.util.ab2str(a.array[g].buffer);else for(g=0;g<a.nrows;++g)h=new Float64Array(a.array[g]),i[g]=h.buffer,j.push(h.buffer);d.postMessageToWorker(f,i,j)}},this.disconnect=function(){c.isNode&&c.nodeCluster.isMaster&&c.nodeCluster.disconnect()},c.createPool(a,e);for(var i=function(a){var b=a.data||a;switch(b.handle){case"_workerReady":l();break;case"_sendData":m(b);break;case"_vectorSendToCoordinator":n(b);break;case"_gatherVector":p(b);break;case"_matrixSendToCoordinator":o(b);break;case"_gatherMatrixRows":q(b);break;case"_gatherMatrixColumns":r(b);break;case"_vectorSum":s(b);break;case"_vectorProduct":t(b);break;default:console.error("Invalid Coordinator handle: "+b)}},j=0;j<c.nWorkers;++j){if(c.isNode){if(c.nodeCluster.isWorker)return;c.getWorker(j).on("message",i)}else c.getWorker(j).onmessage=i;h.push({})}var k=0,l=function(){k+=1,k===c.nWorkers&&(f.ready=!0,f.emit("_ready"),k=0)},m=function(a){h[a.id]=a.data,k+=1,k===c.nWorkers&&(f.emit(a.tag),k=0)},n=function(a){g=new b.Vector;var d=a.vectorBuffer;c.isNode&&(d=b.util.str2ab(d)),g.setVector(new Float64Array(d)),f.emit(a.tag)},o=function(a){var d,e=[];if(c.isNode)for(d=0;d<a.nrows;++d)e.push(new Float64Array(b.util.str2ab(a[d])));else for(d=0;d<a.nrows;++d)e.push(new Float64Array(a[d]));g=new b.Matrix,g.setMatrix(e),f.emit(a.tag)},p=function(a){0===k&&(g=new b.Vector(a.len));for(var d=c.isNode?b.util.str2ab(a.vectorPart):a.vectorPart,e=new Float64Array(d),h=a.offset,i=0;i<e.length;++i)g.array[h+i]=e[i];k+=1,k===c.nWorkers&&(a.rebroadcast?f.sendVectorToWorkers(g,a.tag):f.emit(a.tag),k=0)},q=function(a){var d,e=a.offset;if(0===k&&(g=new b.Matrix(a.nrows,a.ncols)),c.isNode)for(d=0;d<a.nrowsPart;++d)g.array[e+d]=new Float64Array(b.util.str2ab(a[d]));else for(d=0;d<a.nrowsPart;++d)g.array[e+d]=new Float64Array(a[d]);k+=1,k===c.nWorkers&&(a.rebroadcast?f.sendMatrixToWorkers(g,a.tag):f.emit(a.tag),k=0)},r=function(a){var d,e;0===k&&(g=new b.Matrix(a.nrows,a.ncols));var h,i;if(c.isNode)for(e=0,i=a.offset;e<a.nrowsPart;++e,++i)for(h=new Float64Array(b.util.str2ab(a[e])),d=0;d<h.length;++d)g.array[d][i]=h[d];else for(e=0,i=a.offset;e<a.nrowsPart;++e,++i)for(h=new Float64Array(a[e]),d=0;d<h.length;++d)g.array[d][i]=h[d];k+=1,k===c.nWorkers&&(a.rebroadcast?f.sendMatrixToWorkers(g,a.tag):f.emit(a.tag),k=0)},s=function(a){0===k?g=a.tot:g+=a.tot,k+=1,k===c.nWorkers&&(a.rebroadcast?f.sendDataToWorkers(g,a.tag):f.emit(a.tag),k=0)},t=function(a){0===k?g=a.tot:g*=a.tot,k+=1,k===c.nWorkers&&(a.rebroadcast?f.sendDataToWorkers(g,a.tag):f.emit(a.tag),k=0)}},b.Coordinator.prototype=new a,b.MathWorker=function(){var a={},e={};this.getId=function(){return c.myWorkerId},this.getNumWorkers=function(){return c.nWorkers},this.getBuffer=function(){return a},this.on=function(a,b){c.logLevel>2&&console.log("registering trigger: "+a),e[a]=[b]},this.sendDataToCoordinator=function(a,b){d.postMessage({handle:"_sendData",id:c.myWorkerId,tag:b,data:a})},this.sendVectorToCoordinator=function(a,e){if(0===c.myWorkerId){var f=a.array.buffer;c.isNode&&(f=b.util.ab2str(f)),d.postMessage({handle:"_vectorSendToCoordinator",tag:e,vectorBuffer:f},[f])}},this.sendMatrixToCoordinator=function(a,e){if(0===c.myWorkerId){var f,g={handle:"_matrixSendToCoordinator",tag:e,nrows:a.nrows},h=[];if(c.isNode)for(f=0;f<a.nrows;++f)g[f]=b.util.ab2str(a.array[f].buffer);else for(f=0;f<a.nrows;++f)g[f]=a.array[f].buffer,h.push(a.array[f].buffer);d.postMessage(g,h)}},d.setOnMessage(function(a){var b=a.data||a;switch(b.handle){case"_init":f(b);break;case"_trigger":g(b);break;case"_broadcastData":h(b);break;case"_broadcastVector":i(b);break;case"_broadcastMatrix":j(b);break;default:console.error("Invalid MathWorker handle: "+b.handle)}});var f=function(a){c.myWorkerId=a.id,c.nWorkers=a.nWorkers,c.unrollLoops=a.unrollLoops,c.logLevel=a.logLevel,c.logLevel>2&&console.log("Initialized MathWorker: "+c.myWorkerId+" of "+c.nWorkers+" workers."),d.postMessage({handle:"_workerReady"})},g=function(a,b){if(e[a.tag]){e[a.tag]=e[a.tag]||[];var c=a.data||b||[];e[a.tag].forEach(function(a){a.call(this,c)})}else console.error("Unregistered trigger tag: "+a.tag)},h=function(b){a=b.data,g(b)},i=function(d){var e=d.vec;c.isNode&&(e=b.util.str2ab(e)),a=b.Vector.fromArray(new Float64Array(e)),g(d,a)},j=function(d){var e,f=[];if(c.isNode)for(e=0;e<d.nrows;++e)f.push(new Float64Array(b.util.str2ab(d[e])));else for(e=0;e<d.nrows;++e)f.push(new Float64Array(d[e]));a=new b.Matrix,a.setMatrix(f),g(d,a)}},b.MathWorker.prototype=new a,b.MathWorker.gatherVector=function(a,e,f,g,h){h=h||!1;var i=c.isNode?b.util.ab2str(a.buffer):a.buffer;d.postMessage({handle:"_gatherVector",tag:g,id:c.myWorkerId,rebroadcast:h,len:e,offset:f,vectorPart:i},[i])},b.MathWorker.gatherMatrixRows=function(a,e,f,g,h){h=h||!1;var i,j={handle:"_gatherMatrixRows",tag:g,id:c.myWorkerId,rebroadcast:h,nrows:e,ncols:a[0].length,nrowsPart:a.length,offset:f},k=[];if(c.isNode)for(i=0;i<a.length;++i)j[i]=b.util.ab2str(a[i].buffer);else for(i=0;i<a.length;++i)j[i]=a[i].buffer,k.push(a[i].buffer);d.postMessage(j,k)},b.MathWorker.gatherMatrixColumns=function(a,e,f,g,h,i){i=i||!1;var j,k={handle:"_gatherMatrixColumns",tag:h,id:c.myWorkerId,rebroadcast:i,nrows:e,ncols:f,nrowsPart:a.length,offset:g},l=[];if(c.isNode)for(j=0;j<a.length;++j)k[j]=b.util.ab2str(a[j].buffer);else for(j=0;j<a.length;++j)k[j]=a[j].buffer,l.push(a[j].buffer);d.postMessage(k,l)},b.MathWorker.reduceVectorSum=function(a,b,c){c=c||!1,d.postMessage({handle:"_vectorSum",tag:b,rebroadcast:c,tot:a})},b.MathWorker.reduceVectorProduct=function(a,b,c){c=c||!1,d.postMessage({handle:"_vectorProduct",tag:b,rebroadcast:c,tot:a})},b.Vector=function(a){this.array=null,this.length=a||0,a>0&&(this.array=new Float64Array(a))},b.Vector.fromArray=function(a){b.util.checkArray(a);for(var c=new b.Vector(a.length),d=0,e=a.length;e>d;++d)c.array[d]=a[d];return c},b.Vector.prototype.setVector=function(a){b.util.checkFloat64Array(a),this.array=a,this.length=a.length},b.Vector.zeroes=function(a){for(var c=new b.Vector(a),d=0;a>d;++d)c.array[d]=0;return c},b.Vector.randomVector=function(a){for(var c=new b.Vector(a),d=0;a>d;++d)c.array[d]=Math.random();return c},b.Vector.prototype.toString=function(){for(var a="[",b=0;b<this.length-1;++b)a+=this.array[b]+", ";return a+this.array[this.length-1]+"]"},b.Vector.prototype.sum=function(){var a,b=0,d=this.length;if(c.unrollLoops){var e=d-3;for(a=0;e>a;a+=4)b+=this.array[a]+this.array[a+1]+this.array[a+2]+this.array[a+3];for(;d>a;++a)b+=this.array[a]}else for(a=0;d>a;++a)b+=this.array[a];return b},b.Vector.prototype.product=function(){var a,b=1,d=this.length;if(c.unrollLoops){var e=d-3;for(a=0;e>a;a+=4)b*=this.array[a]*this.array[a+1]*this.array[a+2]*this.array[a+3];for(;d>a;++a)b*=this.array[a]}else for(a=0;d>a;++a)b*=this.array[a];return b},b.Vector.prototype.plus=function(a){b.util.checkVectors(this,a);var d,e=new b.Vector(this.length),f=this.length;if(c.unrollLoops){var g=f-3;for(d=0;g>d;d+=4)e.array[d]=this.array[d]+a.array[d],e.array[d+1]=this.array[d+1]+a.array[d+1],e.array[d+2]=this.array[d+2]+a.array[d+2],e.array[d+3]=this.array[d+3]+a.array[d+3];for(;f>d;++d)e.array[d]=this.array[d]+a.array[d]}else for(d=0;f>d;++d)e.array[d]=this.array[d]+a.array[d];return e},b.Vector.prototype.minus=function(a){b.util.checkVectors(this,a);var d,e=new b.Vector(this.length),f=this.length;if(c.unrollLoops){var g=f-3;for(d=0;g>d;d+=4)e.array[d]=this.array[d]-a.array[d],e.array[d+1]=this.array[d+1]-a.array[d+1],e.array[d+2]=this.array[d+2]-a.array[d+2],e.array[d+3]=this.array[d+3]-a.array[d+3];for(;f>d;++d)e.array[d]=this.array[d]-a.array[d]}else for(d=0;f>d;++d)e.array[d]=this.array[d]-a.array[d];return e},b.Vector.prototype.times=function(a){b.util.checkVectors(this,a);var d,e=new b.Vector(this.length),f=this.length;if(c.unrollLoops){var g=f-3;for(d=0;g>d;d+=4)e.array[d]=this.array[d]*a.array[d],e.array[d+1]=this.array[d+1]*a.array[d+1],e.array[d+2]=this.array[d+2]*a.array[d+2],e.array[d+3]=this.array[d+3]*a.array[d+3];for(;f>d;++d)e.array[d]=this.array[d]*a.array[d]}else for(d=0;f>d;++d)e.array[d]=this.array[d]*a.array[d];return e},b.Vector.prototype.divide=function(a){b.util.checkVectors(this,a);var d,e=new b.Vector(this.length),f=this.length;if(c.unrollLoops){var g=f-3;for(d=0;g>d;d+=4)e.array[d]=this.array[d]/a.array[d],e.array[d+1]=this.array[d+1]/a.array[d+1],e.array[d+2]=this.array[d+2]/a.array[d+2],e.array[d+3]=this.array[d+3]/a.array[d+3];for(;f>d;++d)e.array[d]=this.array[d]/a.array[d]}else for(d=0;f>d;++d)e.array[d]=this.array[d]/a.array[d];return e},b.Vector.prototype.scale=function(a){b.util.checkNumber(a);var d,e=new b.Vector(this.length),f=this.length;if(c.unrollLoops){var g=f-3;for(d=0;g>d;d+=4)e.array[d]=this.array[d]*a,e.array[d+1]=this.array[d+1]*a,e.array[d+2]=this.array[d+2]*a,e.array[d+3]=this.array[d+3]*a;for(;f>d;++d)e.array[d]=this.array[d]*a}else for(d=0;f>d;++d)e.array[d]=this.array[d]*a;return e},b.Vector.prototype.apply=function(a){b.util.checkFunction(a);var d,e=new b.Vector(this.length),f=this.length;if(c.unrollLoops){var g=f-3;for(d=0;g>d;d+=4)e.array[d]=a(this.array[d]),e.array[d+1]=a(this.array[d+1]),e.array[d+2]=a(this.array[d+2]),e.array[d+3]=a(this.array[d+3]);for(;f>d;++d)e.array[d]=a(this.array[d])}else for(d=0;f>d;++d)e.array[d]=a(this.array[d]);return e},b.Vector.prototype.dotVector=function(a){b.util.checkVectors(this,a);var d,e=this.length,f=0;if(c.unrollLoops){var g=e-3;for(d=0;g>d;d+=4)f+=this.array[d]*a.array[d]+this.array[d+1]*a.array[d+1]+this.array[d+2]*a.array[d+2]+this.array[d+3]*a.array[d+3];for(;e>d;++d)f+=this.array[d]*a.array[d]}else for(d=0;e>d;++d)f+=this.array[d]*a.array[d];return f},b.Vector.prototype.dotMatrix=function(a){b.util.checkVectorMatrix(this,a);var d,e,f,g=a.ncols,h=this.length,i=new b.Vector(g);if(c.unrollLoops){var j=h-3;for(d=0;g>d;++d){for(f=0,e=0;j>e;e+=4)f+=this.array[e]*a.array[e][d]+this.array[e+1]*a.array[e+1][d]+this.array[e+2]*a.array[e+2][d]+this.array[e+3]*a.array[e+3][d];for(;h>e;++e)f+=this.array[e]*a.array[e][d];i.array[d]=f}}else for(d=0;g>d;++d){for(f=0,e=0;h>e;++e)f+=this.array[e]*a.array[e][d];i.array[d]=f}return i},b.Vector.prototype.workerSum=function(a,d){b.util.checkNullOrUndefined(a);var e,f=b.util.loadBalance(this.length),g=0;if(c.unrollLoops){var h=f.ito-3;for(e=f.ifrom;h>e;++e)g+=this.array[e]+this.array[e+1]+this.array[e+2]+this.array[e+3];for(;e<f.ito;++e)g+=this.array[e]}else for(e=f.ifrom;e<f.ito;++e)g+=this.array[e];b.MathWorker.reduceVectorSum(g,a,d)},b.Vector.prototype.workerProduct=function(a,d){b.util.checkNullOrUndefined(a);var e,f=b.util.loadBalance(this.length),g=1;if(c.unrollLoops){var h=f.ito-3;for(e=f.ifrom;h>e;++e)g*=this.array[e]*this.array[e+1]*this.array[e+2]*this.array[e+3];for(;e<f.ito;++e)g*=this.array[e]}else for(e=f.ifrom;e<f.ito;++e)g*=this.array[e];b.MathWorker.reduceVectorProduct(g,a,d)},b.Vector.prototype.workerPlus=function(a,d,e){b.util.checkVectors(this,a),b.util.checkNullOrUndefined(d);var f,g=b.util.loadBalance(this.length),h=new Float64Array(g.ito-g.ifrom),i=0;if(c.unrollLoops){var j=g.ito-3;for(f=g.ifrom;j>f;++f)h[i++]=this.array[f]+a.array[f],h[i++]=this.array[f+1]+a.array[f+1],h[i++]=this.array[f+2]+a.array[f+2],h[i++]=this.array[f+3]+a.array[f+3];for(;f<g.ito;++f)h[i++]=this.array[f]+a.array[f]}else for(f=g.ifrom;f<g.ito;++f)h[i++]=this.array[f]+a.array[f];b.MathWorker.gatherVector(h,this.length,g.ifrom,d,e)},b.Vector.prototype.workerMinus=function(a,d,e){b.util.checkVectors(this,a),b.util.checkNullOrUndefined(d);var f,g=b.util.loadBalance(this.length),h=new Float64Array(g.ito-g.ifrom),i=0;if(c.unrollLoops){var j=g.ito-3;for(f=g.ifrom;j>f;++f)h[i++]=this.array[f]-a.array[f],h[i++]=this.array[f+1]-a.array[f+1],h[i++]=this.array[f+2]-a.array[f+2],h[i++]=this.array[f+3]-a.array[f+3];for(;f<g.ito;++f)h[i++]=this.array[f]-a.array[f]}else for(f=g.ifrom;f<g.ito;++f)h[i++]=this.array[f]-a.array[f];b.MathWorker.gatherVector(h,this.length,g.ifrom,d,e)},b.Vector.prototype.workerTimes=function(a,d,e){b.util.checkVectors(this,a),b.util.checkNullOrUndefined(d);var f,g=b.util.loadBalance(this.length),h=new Float64Array(g.ito-g.ifrom),i=0;if(c.unrollLoops){var j=g.ito-3;for(f=g.ifrom;j>f;++f)h[i++]=this.array[f]*a.array[f],h[i++]=this.array[f+1]*a.array[f+1],h[i++]=this.array[f+2]*a.array[f+2],h[i++]=this.array[f+3]*a.array[f+3];for(;f<g.ito;++f)h[i++]=this.array[f]*a.array[f]}else for(f=g.ifrom;f<g.ito;++f)h[i++]=this.array[f]*a.array[f];b.MathWorker.gatherVector(h,this.length,g.ifrom,d,e)},b.Vector.prototype.workerDivide=function(a,d,e){b.util.checkVectors(this,a),b.util.checkNullOrUndefined(d);var f,g=b.util.loadBalance(this.length),h=new Float64Array(g.ito-g.ifrom),i=0;if(c.unrollLoops){var j=g.ito-3;for(f=g.ifrom;j>f;++f)h[i++]=this.array[f]/a.array[f],h[i++]=this.array[f+1]/a.array[f+1],h[i++]=this.array[f+2]/a.array[f+2],h[i++]=this.array[f+3]/a.array[f+3];for(;f<g.ito;++f)h[i++]=this.array[f]/a.array[f]}else for(f=g.ifrom;f<g.ito;++f)h[i++]=this.array[f]/a.array[f];b.MathWorker.gatherVector(h,this.length,g.ifrom,d,e)},b.Vector.prototype.workerScale=function(a,d,e){b.util.checkNumber(a),b.util.checkNullOrUndefined(d);var f,g=b.util.loadBalance(this.length),h=new Float64Array(g.ito-g.ifrom),i=0;if(c.unrollLoops){var j=g.ito-3;for(f=g.ifrom;j>f;++f)h[i++]=this.array[f]*a,h[i++]=this.array[f+1]*a,h[i++]=this.array[f+2]*a,h[i++]=this.array[f+3]*a;for(;f<g.ito;++f)h[i++]=this.array[f]*a}else for(f=g.ifrom;f<g.ito;++f)h[i++]=this.array[f]*a;b.MathWorker.gatherVector(h,this.length,g.ifrom,d,e)},b.Vector.prototype.workerApply=function(a,d,e){b.util.checkFunction(a),b.util.checkNullOrUndefined(d);var f,g=b.util.loadBalance(this.length),h=new Float64Array(g.ito-g.ifrom),i=0;if(c.unrollLoops){var j=g.ito-3;for(f=g.ifrom;j>f;++f)h[i++]=a(this.array[f]),h[i++]=a(this.array[f+1]),h[i++]=a(this.array[f+2]),h[i++]=a(this.array[f+3]);for(;f<g.ito;++f)h[i++]=a(this.array[f])}else for(f=g.ifrom;f<g.ito;++f)h[i++]=a(this.array[f]);b.MathWorker.gatherVector(h,this.length,g.ifrom,d,e)},b.Vector.prototype.workerDotVector=function(a,d,e){b.util.checkVectors(this,a),b.util.checkNullOrUndefined(d);var f,g=b.util.loadBalance(this.length),h=0;if(c.unrollLoops){var i=g.ito-3;for(f=g.ifrom;i>f;f+=4)h+=this.array[f]*a.array[f]+this.array[f+1]*a.array[f+1]+this.array[f+2]*a.array[f+2]+this.array[f+3]*a.array[f+3];for(;f<g.ito;++f)h+=this.array[f]*a.array[f]}else for(f=g.ifrom;f<g.ito;++f)h+=this.array[f]*a.array[f];b.MathWorker.reduceVectorSum(h,d,e)},b.Vector.prototype.workerDotMatrix=function(a,d,e){b.util.checkVectorMatrix(this,a),b.util.checkNullOrUndefined(d);var f,g,h,i=this.length,j=b.util.loadBalance(a.ncols),k=new Float64Array(j.ito-j.ifrom),l=0;if(c.unrollLoops){var m=i-3;for(f=j.ifrom;f<j.ito;++f){for(h=0,g=0;m>g;g+=4)h+=this.array[g]*a.array[g][f]+this.array[g+1]*a.array[g+1][f]+this.array[g+2]*a.array[g+2][f]+this.array[g+3]*a.array[g+3][f];for(;i>g;++g)h+=this.array[g]*a.array[g][f];k[l++]=h}}else for(f=j.ifrom;f<j.ito;++f){for(h=0,g=0;i>g;++g)h+=this.array[g]*a.array[g][f];k[l++]=h}b.MathWorker.gatherVector(k,this.length,j.ifrom,d,e)},b.Matrix=function(a,b){if(this.array=[],this.nrows=a||0,this.ncols=b||0,a>0&&b>0){this.array=new Array(a);for(var c=0;a>c;++c)this.array[c]=new Float64Array(b)}},b.Matrix.fromArray=function(a){b.util.checkArray(a);var c,d,e,f=new b.Matrix(a.length,a[0].length),g=a.length;for(c=0;g>c;++c)for(e=a[c].length,d=0;e>d;++d)f.array[c][d]=a[c][d];return f},b.Matrix.prototype.setMatrix=function(a){b.util.checkArray(a),b.util.checkFloat64Array(a[0]),this.array=a,this.nrows=a.length,this.ncols=a[0].length},b.Matrix.prototype.copyColumn=function(a,b){for(var c=0,d=this.nrows;d>c;++c)b[c]=this.array[c][a]},b.Matrix.prototype.copyRow=function(a,b){for(var c=0,d=this.ncols;d>c;++c)b[c]=this.array[a][c]},b.Matrix.prototype.isSquare=function(){return this.nrows===this.ncols},b.Matrix.zeroes=function(a,c){for(var d=new b.Matrix(a,c),e=0;a>e;++e)for(var f=0;c>f;++f)d.array[e][f]=0;return d},b.Matrix.identity=function(a){for(var c=new b.Matrix(a,a),d=0;a>d;++d){for(var e=0;a>e;++e)c.array[d][e]=0;c.array[d][d]=1}return c},b.Matrix.randomMatrix=function(a,c){for(var d=new b.Matrix(a,c),e=0;a>e;++e)for(var f=0;c>f;++f)d.array[e][f]=Math.random();return d},b.Matrix.prototype.toString=function(){for(var a="",b=0;b<this.nrows;++b){for(var c="[",d=0;d<this.ncols-1;++d)c+=this.array[b][d]+", ";a+=c+this.array[b][this.ncols-1]+"]",b!=this.nrows-1&&(a+="\n")}return a},b.Matrix.prototype.plus=function(a){b.util.checkMatrices(this,a);var d,e,f,g,h=new b.Matrix(this.nrows,this.ncols),i=this.nrows,j=this.ncols;if(c.unrollLoops){var k=j-3;for(d=0;i>d;++d){for(f=this.array[d],g=a.array[d],e=0;k>e;e+=4)h.array[d][e]=f[e]+g[e],h.array[d][e+1]=f[e+1]+g[e+1],h.array[d][e+2]=f[e+2]+g[e+2],h.array[d][e+3]=f[e+3]+g[e+3];for(;j>e;++e)h.array[d][e]=f[e]+g[e]}}else for(d=0;i>d;++d)for(f=this.array[d],g=a.array[d],e=0;j>e;++e)h.array[d][e]=f[e]+g[e];return h},b.Matrix.prototype.minus=function(a){b.util.checkMatrices(this,a);var d,e,f,g,h=new b.Matrix(this.nrows,this.ncols),i=this.nrows,j=this.ncols;if(c.unrollLoops){var k=j-3;for(d=0;i>d;++d){for(f=this.array[d],g=a.array[d],e=0;k>e;e+=4)h.array[d][e]=f[e]-g[e],h.array[d][e+1]=f[e+1]-g[e+1],h.array[d][e+2]=f[e+2]-g[e+2],h.array[d][e+3]=f[e+3]-g[e+3];for(;j>e;++e)h.array[d][e]=f[e]-g[e]}}else for(d=0;i>d;++d)for(f=this.array[d],g=a.array[d],e=0;j>e;++e)h.array[d][e]=f[e]-g[e];return h},b.Matrix.prototype.times=function(a){b.util.checkMatrices(this,a);var d,e,f,g,h=new b.Matrix(this.nrows,this.ncols),i=this.nrows,j=this.ncols;if(c.unrollLoops){var k=j-3;for(d=0;i>d;++d){for(f=this.array[d],g=a.array[d],e=0;k>e;e+=4)h.array[d][e]=f[e]*g[e],h.array[d][e+1]=f[e+1]*g[e+1],h.array[d][e+2]=f[e+2]*g[e+2],h.array[d][e+3]=f[e+3]*g[e+3];for(;j>e;++e)h.array[d][e]=f[e]*g[e]}}else for(d=0;i>d;++d)for(f=this.array[d],g=a.array[d],e=0;j>e;++e)h.array[d][e]=f[e]*g[e];return h},b.Matrix.prototype.divide=function(a){b.util.checkMatrices(this,a);var d,e,f,g,h=new b.Matrix(this.nrows,this.ncols),i=this.nrows,j=this.ncols;if(c.unrollLoops){var k=j-3;for(d=0;i>d;++d){for(f=this.array[d],g=a.array[d],e=0;k>e;e+=4)h.array[d][e]=f[e]/g[e],h.array[d][e+1]=f[e+1]/g[e+1],h.array[d][e+2]=f[e+2]/g[e+2],h.array[d][e+3]=f[e+3]/g[e+3];for(;j>e;++e)h.array[d][e]=f[e]/g[e]}}else for(d=0;i>d;++d)for(f=this.array[d],g=a.array[d],e=0;j>e;++e)h.array[d][e]=f[e]/g[e];return h},b.Matrix.prototype.scale=function(a){b.util.checkNumber(a);var d,e,f,g=new b.Matrix(this.nrows,this.ncols),h=this.nrows,i=this.ncols;if(c.unrollLoops){var j=i-3;for(d=0;h>d;++d){for(f=this.array[d],e=0;j>e;e+=4)g.array[d][e]=f[e]*a,g.array[d][e+1]=f[e+1]*a,g.array[d][e+2]=f[e+2]*a,g.array[d][e+3]=f[e+3]*a;for(;i>e;++e)g.array[d][e]=f[e]*a}}else for(d=0;h>d;++d)for(f=this.array[d],e=0;i>e;++e)g.array[d][e]=f[e]*a;return g},b.Matrix.prototype.apply=function(a){b.util.checkFunction(a);var d,e,f,g=new b.Matrix(this.nrows,this.ncols),h=this.nrows,i=this.ncols;if(c.unrollLoops){var j=i-3;for(d=0;h>d;++d){for(f=this.array[d],e=0;j>e;e+=4)g.array[d][e]=a(f[e]),g.array[d][e+1]=a(f[e+1]),g.array[d][e+2]=a(f[e+2]),g.array[d][e+3]=a(f[e+3]);for(;i>e;++e)g.array[d][e]=a(f[e])}}else for(d=0;h>d;++d)for(f=this.array[d],e=0;i>e;++e)g.array[d][e]=a(f[e]);return g},b.Matrix.prototype.transpose=function(){var a,c,d,e=new b.Matrix(this.ncols,this.nrows),f=this.nrows,g=this.ncols;for(a=0;f>a;++a)for(d=this.array[a],c=0;g>c;++c)e.array[c][a]=d[c];return e},b.Matrix.prototype.transposeInPlace=function(){if(!this.isSquare())throw new Error("In place transpose only available for square matrices.");var a,b,c=this.nrows,d=this.ncols;for(a=0;c>a;++a)for(b=a+1;d>b;++b){var e=this.array[a][b];this.array[a][b]=this.array[b][a],this.array[b][a]=e}return this},b.Matrix.prototype.dotVector=function(a){b.util.checkMatrixVector(this,a);var d,e,f,g,h=new b.Vector(this.nrows),i=this.nrows,j=this.ncols;if(c.unrollLoops){var k=j-3;for(e=0;i>e;++e){for(d=0,g=this.array[e],f=0;k>f;f+=4)d+=g[f]*a.array[f]+g[f+1]*a.array[f+1]+g[f+2]*a.array[f+2]+g[f+3]*a.array[f+3];for(;j>f;++f)d+=g[f]*a.array[f];h.array[e]=d}}else for(e=0;i>e;++e){for(d=0,g=this.array[e],f=0;j>f;++f)d+=g[f]*a.array[f];h.array[e]=d}return h},b.Matrix.prototype.dotMatrix=function(a){b.util.checkMatrixMatrix(this,a);var d,e,f,g,h,i=new b.Matrix(this.nrows,a.ncols),j=this.nrows,k=this.ncols,l=a.ncols,m=new Float64Array(k);if(c.unrollLoops){var n=k-3;for(f=0;l>f;++f)for(a.copyColumn(f,m),d=0;j>d;++d){for(g=0,h=this.array[d],e=0;n>e;e+=4)g+=h[e]*m[e]+h[e+1]*m[e+1]+h[e+2]*m[e+2]+h[e+3]*m[e+3];for(;k>e;++e)g+=h[e]*m[e];i.array[d][f]=g}}else for(f=0;l>f;++f)for(a.copyColumn(f,m),d=0;j>d;++d){for(g=0,h=this.array[d],e=0;k>e;++e)g+=h[e]*m[e];i.array[d][f]=g}return i},b.Matrix.prototype.workerPlus=function(a,d,e){b.util.checkMatrices(this,a),b.util.checkNullOrUndefined(d);var f,g,h,i,j,k=b.util.loadBalance(this.nrows),l=[],m=0,n=this.ncols;if(c.unrollLoops){var o=n-3;for(f=k.ifrom;f<k.ito;++f){for(l.push(new Float64Array(n)),h=this.array[f],i=a.array[f],j=l[m],g=0;o>g;g+=4)j[g]=h[g]+i[g],j[g+1]=h[g+1]+i[g+1],j[g+2]=h[g+2]+i[g+2],j[g+3]=h[g+3]+i[g+3];for(;n>g;++g)j[g]=h[g]+i[g];++m}}else for(f=k.ifrom;f<k.ito;++f){for(l.push(new Float64Array(n)),h=this.array[f],i=a.array[f],j=l[m],g=0;n>g;++g)j[g]=h[g]+i[g];++m}b.MathWorker.gatherMatrixRows(l,this.nrows,k.ifrom,d,e)},b.Matrix.prototype.workerMinus=function(a,d,e){b.util.checkMatrices(this,a),b.util.checkNullOrUndefined(d);var f,g,h,i,j,k=b.util.loadBalance(this.nrows),l=[],m=0,n=this.ncols;if(c.unrollLoops){var o=n-3;for(f=k.ifrom;f<k.ito;++f){for(l.push(new Float64Array(n)),h=this.array[f],i=a.array[f],j=l[m],g=0;o>g;g+=4)j[g]=h[g]-i[g],j[g+1]=h[g+1]-i[g+1],j[g+2]=h[g+2]-i[g+2],j[g+3]=h[g+3]-i[g+3];for(;n>g;++g)j[g]=h[g]-i[g];++m}}else for(f=k.ifrom;f<k.ito;++f){for(l.push(new Float64Array(n)),h=this.array[f],i=a.array[f],j=l[m],g=0;n>g;++g)j[g]=h[g]-i[g];++m}b.MathWorker.gatherMatrixRows(l,this.nrows,k.ifrom,d,e)},b.Matrix.prototype.workerTimes=function(a,d,e){b.util.checkMatrices(this,a),b.util.checkNullOrUndefined(d);var f,g,h,i,j,k=b.util.loadBalance(this.nrows),l=[],m=0,n=this.ncols;if(c.unrollLoops){var o=n-3;for(f=k.ifrom;f<k.ito;++f){for(l.push(new Float64Array(n)),h=this.array[f],i=a.array[f],j=l[m],g=0;o>g;g+=4)j[g]=h[g]*i[g],j[g+1]=h[g+1]*i[g+1],j[g+2]=h[g+2]*i[g+2],j[g+3]=h[g+3]*i[g+3];for(;n>g;++g)j[g]=h[g]*i[g];++m}}else for(f=k.ifrom;f<k.ito;++f){for(l.push(new Float64Array(n)),h=this.array[f],i=a.array[f],j=l[m],g=0;n>g;++g)j[g]=h[g]*i[g];++m}b.MathWorker.gatherMatrixRows(l,this.nrows,k.ifrom,d,e)},b.Matrix.prototype.workerDivide=function(a,d,e){b.util.checkMatrices(this,a),b.util.checkNullOrUndefined(d);var f,g,h,i,j,k=b.util.loadBalance(this.nrows),l=[],m=0,n=this.ncols;if(c.unrollLoops){var o=n-3;for(f=k.ifrom;f<k.ito;++f){for(l.push(new Float64Array(n)),h=this.array[f],i=a.array[f],j=l[m],g=0;o>g;g+=4)j[g]=h[g]/i[g],j[g+1]=h[g+1]/i[g+1],j[g+2]=h[g+2]/i[g+2],j[g+3]=h[g+3]/i[g+3];for(;n>g;++g)j[g]=h[g]/i[g];++m}}else for(f=k.ifrom;f<k.ito;++f){for(l.push(new Float64Array(n)),h=this.array[f],i=a.array[f],j=l[m],g=0;n>g;++g)j[g]=h[g]/i[g];++m}b.MathWorker.gatherMatrixRows(l,this.nrows,k.ifrom,d,e)},b.Matrix.prototype.workerScale=function(a,d,e){b.util.checkNumber(a),b.util.checkNullOrUndefined(d);var f,g,h,i,j=b.util.loadBalance(this.nrows),k=[],l=0,m=this.ncols;if(c.unrollLoops){var n=m-3;for(f=j.ifrom;f<j.ito;++f){for(k.push(new Float64Array(m)),h=this.array[f],i=k[l],g=0;n>g;g+=4)i[g]=h[g]*a,i[g+1]=h[g+1]*a,i[g+2]=h[g+2]*a,i[g+3]=h[g+3]*a;for(;m>g;++g)i[g]=h[g]*a;++l}}else for(f=j.ifrom;f<j.ito;++f){for(k.push(new Float64Array(m)),h=this.array[f],i=k[l],g=0;m>g;++g)i[g]=h[g]*a;++l}b.MathWorker.gatherMatrixRows(k,this.nrows,j.ifrom,d,e)},b.Matrix.prototype.workerApply=function(a,d,e){b.util.checkFunction(a),b.util.checkNullOrUndefined(d);var f,g,h,i,j=b.util.loadBalance(this.nrows),k=[],l=0,m=this.ncols;if(c.unrollLoops){var n=m-3;for(f=j.ifrom;f<j.ito;++f){for(k.push(new Float64Array(m)),h=this.array[f],i=k[l],g=0;n>g;g+=4)i[g]=a(h[g]),i[g+1]=a(h[g+1]),i[g+2]=a(h[g+2]),i[g+3]=a(h[g+3]);for(;m>g;++g)i[g]=a(h[g]);++l}}else for(f=j.ifrom;f<j.ito;++f){for(k.push(new Float64Array(m)),h=this.array[f],i=k[l],g=0;m>g;++g)i[g]=a(h[g]);++l}b.MathWorker.gatherMatrixRows(k,this.nrows,j.ifrom,d,e)},b.Matrix.prototype.workerDotVector=function(a,d,e){b.util.checkMatrixVector(this,a),b.util.checkNullOrUndefined(d);var f,g,h,i,j=b.util.loadBalance(this.nrows),k=new Float64Array(j.ito-j.ifrom),l=this.ncols,m=0;if(c.unrollLoops){var n=l-3;for(f=j.ifrom;f<j.ito;++f){for(i=this.array[f],h=0,g=0;n>g;g+=4)h+=i[g]*a.array[g]+i[g+1]*a.array[g+1]+i[g+2]*a.array[g+2]+i[g+3]*a.array[g+3];for(;l>g;++g)h+=i[g]*a.array[g];k[m++]=h}}else for(f=j.ifrom;f<j.ito;++f){for(i=this.array[f],h=0,g=0;l>g;++g)h+=i[g]*a.array[g];k[m++]=h}b.MathWorker.gatherVector(k,a.length,j.ifrom,d,e)},b.Matrix.prototype.workerDotMatrix=function(a,d,e){b.util.checkMatrixMatrix(this,a),b.util.checkNullOrUndefined(d);var f,g,h,i,j,k=this.nrows,l=this.ncols,m=b.util.loadBalance(a.ncols),n=m.ito-m.ifrom,o=new Array(n);for(h=0;n>h;++h)o[h]=new Float64Array(k);var p=new Float64Array(l);if(c.unrollLoops){var q=l-3;for(h=0;n>h;++h)for(a.copyColumn(m.ifrom+h,p),f=0;k>f;++f){for(i=0,j=this.array[f],g=0;q>g;g+=4)i+=j[g]*p[g]+j[g+1]*p[g+1]+j[g+2]*p[g+2]+j[g+3]*p[g+3];for(;l>g;++g)i+=j[g]*p[g];o[h][f]=i}}else for(h=0;n>h;++h)for(a.copyColumn(m.ifrom+h,p),f=0;k>f;++f){for(i=0,j=this.array[f],g=0;l>g;++g)i+=j[g]*p[g];o[h][f]=i}b.MathWorker.gatherMatrixColumns(o,this.nrows,a.ncols,m.ifrom,d,e)},b.Batch={},b.Batch.workerVectorLinearCombination=function(a,d,e,f){b.util.checkNumber(d[0]),b.util.checkVector(a[0]),b.util.checkNullOrUndefined(e);var g,h,i,j=0,k=a[0],l=d[0],m=b.util.loadBalance(k.length),n=new Float64Array(m.ito-m.ifrom);if(c.unrollLoops){for(i=m.ito-3,g=m.ifrom;i>g;++g)n[j++]=l*k.array[g],n[j++]=l*k.array[g+1],n[j++]=l*k.array[g+2],n[j++]=l*k.array[g+3];for(;g<m.ito;++g)n[j++]=l*k.array[g]}else for(g=m.ifrom;g<m.ito;++g)n[j++]=l*k.array[g];for(h=1;h<a.length;++h)if(j=0,k=a[h],l=d[h],b.util.checkNumber(l),b.util.checkVectors(a[h-1],k),c.unrollLoops){for(g=m.ifrom;i>g;++g)n[j++]+=l*k.array[g],n[j++]+=l*k.array[g+1],n[j++]+=l*k.array[g+2],n[j++]+=l*k.array[g+3];for(;g<m.ito;++g)n[j++]+=l*k.array[g]}else for(g=m.ifrom;g<m.ito;++g)n[j++]+=l*k.array[g];b.MathWorker.gatherVector(n,k.length,m.ifrom,e,f)},b.Batch.workerMatrixLinearCombination=function(a,c,d,e){b.util.checkNumber(c[0]),b.util.checkMatrix(a[0]),b.util.checkNullOrUndefined(d);var f,g,h=[],i=0,j=a[0],k=c[0],l=b.util.loadBalance(a[0].nrows);for(f=l.ifrom;f<l.ito;++f){for(h.push(new Float64Array(j.ncols)),g=0;g<j.ncols;++g)h[i][g]=k*j.array[f][g];++i}for(var m=1;m<a.length;++m)for(i=0,j=a[m],k=c[m],b.util.checkNumber(k),b.util.checkMatrices(a[m-1],j),f=l.ifrom;f<l.ito;++f){for(g=0;g<j.ncols;++g)h[i][g]+=k*j.array[f][g];++i}b.MathWorker.gatherMatrixRows(h,j.nrows,l.ifrom,d,e)
},b.Batch.workerMatrixVectorPlus=function(a,c,d,e,f,g,h){b.util.checkNumber(a),b.util.checkMatrixVector(c,d),b.util.checkNullOrUndefined(e);var i,j,k,l=b.util.loadBalance(c.nrows),m=new Float64Array(l.ito-l.ifrom),n=0;if(g&&h)for(b.util.checkNumber(g),b.util.checkVectors(d,h),i=l.ifrom;i<l.ito;++i){for(k=0,j=0;j<this.ncols;++j)k+=c.array[i][j]*d.array[j];m[n++]=a*k+g*h[i]}else for(i=l.ifrom;i<l.ito;++i){for(k=0,j=0;j<this.ncols;++j)k+=c.array[i][j]*d.array[j];m[n++]=a*k}b.MathWorker.gatherVector(m,d.length,l.ifrom,e,f)},b.Batch.workerMatrixMatrixPlus=function(a,c,d,e,f,g,h){b.util.checkNumber(a),b.util.checkMatrixMatrix(c,d),b.util.checkNullOrUndefined(e);var i,j,k,l,m=d.isSquare()?d.transposeInPlace():d.transpose(),n=b.util.loadBalance(c.nrows),o=[],p=0;if(g&&h){if(b.util.checkNumber(g),b.util.checkMatrix(h),c.nrows!==h.nrows||d.ncols!==h.ncols)throw new Error("Matrix dimensions not compatible for addition.");for(i=n.ifrom;i<n.ito;++i){for(o.push(new Float64Array(d.ncols)),j=0;j<d.ncols;++j){for(l=0,k=0;k<c.ncols;++k)l+=c.array[i][k]*m.array[j][k];o[p][j]=a*l+g*h.array[i][j]}++p}}else for(i=n.ifrom;i<n.ito;++i){for(o.push(new Float64Array(d.ncols)),j=0;j<d.ncols;++j){for(l=0,k=0;k<c.ncols;++k)l+=c.array[i][k]*m.array[j][k];o[p][j]=a*l}++p}d.isSquare&&d.transposeInPlace(),b.MathWorker.gatherMatrixRows(o,c.nrows,n.ifrom,e,f)},b.Stats={},b.Stats.summary=function(a){function c(a,b){var c=b-a+1,d=c/2|0,f=c%2,g=f?e[a+d]:.5*(e[a+d-1]+e[a+d]);return{median:g,half:d,odd:f}}b.util.checkNullOrUndefined(a);var d,e=[];if(a instanceof b.Vector)for(d=0;d<a.array.length;++d)e.push(a.array[d]);else if(a instanceof b.Matrix)for(d=0;d<a.nrows;++d)for(var f=0;f<a.ncols;++f)e.push(a.array[d][f]);else{if(!(a instanceof Array||a instanceof Float64Array))throw new TypeError("Invalid data type for summary(). Must be Array, Float64Array, or Vector.");for(d=0;d<a.length;++d)e.push(a[d])}var g,h=e.length,i=0,j=Math.max.apply(Math,e),k=Math.min.apply(Math,e);for(d=0;h>d;++d)i+=e[d];var l=i/h,m=0;for(d=0;h>d;++d)g=l-e[d],m+=g*g;m/=h;var n,o,p,q=Math.sqrt(m);if(h>=3){e.sort(function(a,b){return a-b});var r,s;r=c(0,h-1),o=r.median,s=c(r.half,h-1),p=s.median,r.odd?(s=c(0,r.half),n=s.median):(s=c(0,r.half-1),n=s.median)}return{n:e.length,mean:l,variance:m,stddev:q,minimum:k,maximum:j,quartile25:n,quartile50:o,quartile75:p}},b}();"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=a:"undefined"!=typeof window?window.MathWorkers=a:self.MathWorkers=a}();